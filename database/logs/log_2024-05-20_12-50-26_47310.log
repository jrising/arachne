James encountered an issue using `dplyr::lag` where all values showed as `NA`. The problem was due to grouping by `ISO`, `Year`, and `mc`, resulting in single-row groups for lag calculation. The solution involved removing `Year` from the grouping to allow proper lag computation within multi-row groups. By regrouping only by `ISO` and `mc` and including `ungroup()`, `dplyr::lag` correctly computed lagged values, showing the expected output with non-NA values for `cumul.allcap.usd.nn.lag` and `allcap.usd`.
