In our previous conversation, you sought a method to download and delete all emails in Gmail before a specific date without filtering to the inbox, mentioning the existence of other folders. I provided a Python script utilizing IMAP that iterates through all folders. You encountered an error related to handling email subjects due to them being `Header` objects instead of strings. I updated the code to properly decode these headers. However, you then faced a `LookupError` for an unknown encoding. I advised further adjustments to handle unknown encodings safely, allowing the script to convert subjects to strings while managing potential errors. The proposed solution utilizes a fallback to UTF-8 decoding within the subject parsing function.
