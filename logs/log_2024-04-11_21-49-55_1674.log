**assistant**:
> Below are selected log entries of past conversations, as part of an experimental AI memory system. T
**user**:
> I have a xarray dataset. When I take ds.zos.mean(dim=['lat', 'lon']), I get all `inf` values. I think because there are inf values on land. How can I ignore inf values when I do the mean?
**assistant**:
> I suspect that the NaN or `inf` values in your dataset are causing the issue because the mean of any number sequence that includes NaN or `inf` is also NaN or `inf`.
> 
> To ignore `inf` (and NaN) values when calculating the mean, you should use the `nanmean()` function instead of the `mean()` function. This xarray method computes the arithmetic mean while ignoring missing values (identified by NaN).
> 
> So, in your case, it would look like this:
> 
> ```python
> ds.zos.where(xr.ufuncs.isfinite(ds.zos)).mean(dim=['lat', 'lon'])
> ```
> 
> In this command, we are using `where()` function to select only the finite values, then applying the mean operation. Make sure that you have all necessary libraries updated as some of these functions might not be available in older versions.
