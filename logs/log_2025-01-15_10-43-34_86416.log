**assistant**:
> Below are selected log entries of past conversations, as part of an experimental AI memory system. T
**user**:
> In xarray, how do I add a new variable with an existing coordinate?
**assistant**:
> To add a new variable to an `xarray.Dataset`, using an existing coordinate, you can utilize the `assign` method or simply add it as a new key. Here's an example:
> 
> Suppose you have a dataset `ds` with a coordinate `time`, and you want to add a new variable `temperature` using this coordinate:
> 
> ```python
> import xarray as xr
> import numpy as np
> 
> # Example dataset
> time = pd.date_range('2023-01-01', periods=5)
> ds = xr.Dataset(coords={'time': time})
> 
> # New variable data
> temperature_data = np.random.rand(5)  # Example data
> 
> # Adding a new variable to the dataset
> ds['temperature'] = ('time', temperature_data)
> 
> # Alternatively, using the assign method
> ds = ds.assign(temperature=('time', temperature_data))
> 
> print(ds)
> ```
> 
> Here, `('time', temperature_data)` specifies that the `temperature` variable should use `time` as its coordinate and that `temperature_data` is the data array corresponding to it. Both methods will result in the new `temperature` variable being added to the dataset with `time` as its coordinate.
